"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveRole = void 0;
const discord_utilities_1 = require("@sapphire/discord-utilities");
const result_1 = require("@sapphire/result");
require("../errors/Identifiers");
async function resolveRole(parameter, guild) {
    const role = (await resolveById(parameter, guild)) ?? resolveByQuery(parameter, guild);
    if (role)
        return (0, result_1.ok)(role);
    return (0, result_1.err)("roleError" /* Identifiers.ArgumentRoleError */);
}
exports.resolveRole = resolveRole;
async function resolveById(argument, guild) {
    const roleId = discord_utilities_1.RoleMentionRegex.exec(argument) ?? discord_utilities_1.SnowflakeRegex.exec(argument);
    return roleId ? guild.roles.fetch(roleId[1]) : null;
}
function resolveByQuery(argument, guild) {
    const lowerCaseArgument = argument.toLowerCase();
    return guild.roles.cache.find((role) => role.name.toLowerCase() === lowerCaseArgument) ?? null;
}
//# sourceMappingURL=role.js.map